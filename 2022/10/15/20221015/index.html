<!DOCTYPE html><html class="appearance-auto" lang="en"><head><meta charset="UTF-8"><title>入住两周，我治好了入户 Wifi 的精神内耗</title><meta name="description"><meta name="viewport" content="width=device-width, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no, initial-scale=1"><!-- Google Analytics --><!-- End Google Analytics -->
<!-- Baidu Analytics --><!-- End Baidu Analytics --><link rel="icon" href="/images/favicon.ico"><link rel="stylesheet" href="/style/common/bulma.css"><link rel="stylesheet" href="/style/base.css"><link rel="stylesheet" href="/style/common/helper.css"><script src="/js/common.js"></script><link rel="stylesheet" href="/style/post.css"><link rel="stylesheet" href="/style/themes/highlight-theme-light.css"><script src="/js/highlight.pack.js"></script><meta name="description" content="引子事情要从来霓虹租房说起：
来这边的时候比较匆忙，直到走之前大概两周才开始考虑租房的事情。其时已经没什么选择的余地了，就在车站附近两公里开外找了一间公寓签了合同，中介是某レ〇〇〇ス。入住之后发现原来租房的钱里还附带了每个月大概三千円的网费，据中介网络大概是“一栋楼共用100兆宽带”，听着就让人血压升高。百闻不如一见，实际的情况恐怕要更加糟糕：在非高峰期浏览网页（比如这个）都费劲，遑论在晚上要和一栋楼的设备竞争带宽，联机游戏完全属于奢望。搬进来的前几天里，我唯一的替代方案就是用流量开热点。正值 Windows 22H2 推送，没多久就清空了我这个月的流量
说到这里要好好介绍一下这个月额三千円的宽带套餐：房屋中介（レ〇〇〇ス）兼有 ISP 的角色，网络也不是入户即用的而是要经过中介提供的终端（ラ〇〇〇〇〇〇ク.."><meta name="generator" content="Hexo 6.2.0">
<style>.github-emoji { position: relative; display: inline-block; width: 1.2em; min-height: 1.2em; overflow: hidden; vertical-align: top; color: transparent; }  .github-emoji > span { position: relative; z-index: 10; }  .github-emoji img, .github-emoji .fancybox { margin: 0 !important; padding: 0 !important; border: none !important; outline: none !important; text-decoration: none !important; user-select: none !important; cursor: auto !important; }  .github-emoji img { height: 1.2em !important; width: 1.2em !important; position: absolute !important; left: 50% !important; top: 50% !important; transform: translate(-50%, -50%) !important; user-select: none !important; cursor: auto !important; } .github-emoji-fallback { color: inherit; } .github-emoji-fallback img { opacity: 0 !important; }</style>
</head><body class="is-flex is-flex-direction-column"><header class="header-widget is-flex-shrink-0 is-hidden-mobile"><div class="container is-fullhd is-flex is-justify-content-space-between is-align-items-center is-full-height"><section class="is-hidden-mobile is-flex-shrink-0"><h2><a href="/">pointeee's blog</a></h2></section><h3 class="is-hidden-mobile is-family-serif is-full-height is-flex is-align-items-center is-flex-shrink-0"><div class="is-full-height" id="postTopic"><p class="is-full-height is-flex-shrink-0 is-flex is-align-items-center is-justify-content-center">入住两周，我治好了入户 Wifi 的精神内耗</p><p class="is-full-height is-flex-shrink-0 is-flex is-align-items-center is-justify-content-center">Click back to the top</p></div></h3><aside class="is-flex-shrink-0"><h3 class="is-inline-block"><a href="/">Home</a></h3><h3 class="is-inline-block"><a href="/about">About</a></h3><h3 class="is-inline-block"><a href="/archives">Archive</a></h3><h3 class="is-inline-block"><a href="/Friends">Friends</a></h3></aside></div></header><header class="is-flex header-widget is-flex-shrink-0 is-align-items-center is-justify-content-center is-hidden-tablet"><h3 class="is-inline-block"><a href="/">Home</a></h3><h3 class="is-inline-block"><a href="/about">About</a></h3><h3 class="is-inline-block"><a href="/archives">Archive</a></h3><h3 class="is-inline-block"><a href="/Friends">Friends</a></h3></header><main><main class="container is-max-widescreen content section post-page pt-4 px-4"><div class="columns is-flex-desktop is-justify-content-center is-flex-direction-row-reverse"><div class="column is-3 is-hidden-mobile"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%BC%95%E5%AD%90"><span class="toc-text">引子</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%9B%9E%E6%A0%A1%E4%BB%A3%E7%90%86"><span class="toc-text">回校代理</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8A%A0%E9%80%9F%E5%99%A8"><span class="toc-text">加速器</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%8B%94%E7%BD%91%E7%BA%BF%EF%BC%88%E7%89%A9%E7%90%86%EF%BC%89"><span class="toc-text">拔网线（物理）</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%9B%9E%E6%A0%A1%E4%BB%A3%E7%90%86-1"><span class="toc-text">回校代理</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8A%A0%E9%80%9F%E5%99%A8-1"><span class="toc-text">加速器</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Cloudflare-Warp"><span class="toc-text">Cloudflare Warp</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%BD%AC%E5%8F%98%E6%80%9D%E8%B7%AF"><span class="toc-text">转变思路</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%B0%BE%E5%A3%B0"><span class="toc-text">尾声</span></a></li></ol></div><div class="column is-9"><header class="my-4"><a href="/tags/Life"><i class="tag post-item-tag">Life</i></a></header><h1 class="mt-0 mb-1 is-family-serif" id="postTitle">入住两周，我治好了入户 Wifi 的精神内耗</h1><time class="has-text-grey" datetime="2022-10-15T11:17:55.000Z">2022-10-15</time><article class="mt-2 post-content"><h2 id="引子"><a href="#引子" class="headerlink" title="引子"></a>引子</h2><p>事情要从来霓虹租房说起：</p>
<p>来这边的时候比较匆忙，直到走之前大概两周才开始考虑租房的事情。其时已经没什么选择的余地了，就在车站<del>附近</del>两公里开外找了一间公寓签了合同，中介是某レ〇〇〇ス。入住之后发现原来租房的钱里还附带了每个月大概三千円的网费，据中介网络大概是“一栋楼共用100兆宽带”，听着就让人血压升高。百闻不如一见，实际的情况恐怕要更加糟糕：在非高峰期浏览网页（比如<a target="_blank" rel="noopener" href="https://speedtest.net/">这个</a>）都费劲，遑论在晚上要和一栋楼的设备竞争带宽，联机游戏完全属于奢望。搬进来的前几天里，我唯一的替代方案就是用流量开热点。<del>正值 Windows 22H2 推送，没多久就清空了我这个月的流量</del></p>
<p>说到这里要好好介绍一下这个月额三千円的宽带套餐：房屋中介（レ〇〇〇ス）兼有 ISP 的角色，网络也不是入户即用的而是要经过中介提供的终端（ラ〇〇〇〇〇〇ク）。这个终端实际上是一个定制化、集成无线热点功能的Android机顶盒，一边连着入户网线，另一面接着电视。使用的时候需要用中介提供的账号密码注册、开通网络，之后这个终端就会在电视上显示 SSID 和密码。在这个热点下的网络体验可想而知；同时出于可用性考虑终端大概还限制了网络的下行速度，只要开游戏就开始高延迟加丢包，对于想打游戏（指派派）的我而言基本等于没有。</p>
<p>为了能愉快的联机，我开始研究怎么保证网络稳定。考虑过的方案包括去学校（<strong>工作场所不宜</strong>） / 开流量卡（贵） / 拉其他运营商的线（语言不通，不能在房间里打洞），但是都有一定的困难；所以问题就回到了怎么好好利用这条包含在房租里的线路。</p>
<h3 id="回校代理"><a href="#回校代理" class="headerlink" title="回校代理"></a>回校代理</h3><p>很喜欢[数据删除]的一句话：一入〇〇门，一生〇〇人。作为刚刚从技校毕业的中级技工，一个没过期的回校代理是必不可少的。考虑到从霓虹回国的延迟，挂代理其实只有稳定性的考虑。但是这里感人的网络质量消解了任何的稳定性，游戏体验也只不过是从连不上变成能连接。</p>
<h3 id="加速器"><a href="#加速器" class="headerlink" title="加速器"></a>加速器</h3><p>打游戏不开加速器，就好像读四大名著不用 Kindle。遗憾的是，加速器也没用（<del>而且用的还是出国线路</del>）</p>
<h2 id="拔网线（物理）"><a href="#拔网线（物理）" class="headerlink" title="拔网线（物理）"></a>拔网线（物理）</h2><p>在极度愤怒的情况下，我决定把终端（ラ〇〇〇〇〇〇ク）上的网线直接接在电脑上。这时打开浏览器，发现内网地址 10.XXX.XXX.1 要求验证用户名和密码。把各种用户名和密码乱试一通均不成功，而直接留空会出现鉴权失败。就在这时，奇迹发生了：虽然浏览器提示验证失败，但多数网页（除了<a target="_blank" rel="noopener" href="https://speedtest.net/">这个</a>）已经可以访问了，Steam 本身的更新也可以正常进行。另一方面，我发现 ping 任何网站的结果都为超时（但是地址可以解析），Steam上的多数游戏也无法连接到服务器。由于绕过了 ISP 的终端，与之相关的网速限制和丢包问题不复存在，网络的可用性有了很大提升，但是离联机 Apex 还有很大距离。<code>tracert</code> 的结果如下：</p>
<figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">tracert vstc.edu.cn</span></span><br><span class="line"></span><br><span class="line">通过最多 30 个跃点跟踪</span><br><span class="line">到 vstc.edu.cn [202.38.64.246] 的路由:</span><br><span class="line"></span><br><span class="line">  1     1 ms     1 ms    &lt;1 毫秒 10.123.237.1</span><br><span class="line">  2     *        *       *</span><br><span class="line">  </span><br><span class="line">(下略)</span><br></pre></td></tr></tbody></table></figure>

<h3 id="回校代理-1"><a href="#回校代理-1" class="headerlink" title="回校代理"></a>回校代理</h3><p>结果上成功了。回校代理的运作基本正常，通过优化线路到服务器的延迟可以控制在 100ms 左右。在套上这层代理之后，ping 的结果也能正常显示，基本可以认为有了对网络的完整访问。对此的解释是网关 10.XXX.XXX.1 不会拦截加密流量，所以 HTTPS 网页可以访问，而 ICMP 包会被拦截；而回校代理加密了所有通信，所以 ping 恢复了正常。美中不足的是，在这种网络条件下连接 Apex 日本服务器需要回国再出国，延迟仍然是不可接受的 （&gt; 200ms）。</p>
<h3 id="加速器-1"><a href="#加速器-1" class="headerlink" title="加速器"></a>加速器</h3><p>打游戏不开加速器，就好像读四大名著不用 Kindle （二度）。在回校代理开启的前提下，由于加速器只能优化出国线路，效果有限，最终游戏内 ping 在 150ms 上下。如果关闭回校代理，加速器无法单独工作。</p>
<h3 id="Cloudflare-Warp"><a href="#Cloudflare-Warp" class="headerlink" title="Cloudflare Warp"></a>Cloudflare Warp</h3><p>按照加密流量的思路，我被推荐了 CF Warp。CF Warp的安装和配置并不困难，只要直接从<a target="_blank" rel="noopener" href="https://1.1.1.1/">官网</a>上下好客户端，一路确定就可以用了。但是它并不奏效，没有像预期的那样工作。随后我尝试了用 Wire Guard 配置 CF Warp 代理，也无法工作。对此我猜测 CF Warp 和 WG （前者其实也基于后者的实现）与 Cisco AnyConnect 工作在不同的抽象层级上，所以抗封锁能力也不同。</p>
<h2 id="转变思路"><a href="#转变思路" class="headerlink" title="转变思路"></a>转变思路</h2><p>回顾上面的 <code>tracert</code> 结果，我发现我遇到的正是千千万万个（技校以外的）大学生在生活中遇到的实际问题：校园网鉴权。一些网络资源指出可以通过伪装 DNS 流量 / 伪装已验证设备 MAC 地址来绕过鉴权，出于成本考虑我首先尝试了后者。大多数教程使用了 <a target="_blank" rel="noopener" href="https://www.advanced-port-scanner.com/">Advanced Port Scanner</a> 来扫描内网的设备，但是这个策略似乎只在无线网络上有效；乱扫一通之后发现的设备只有本机和网关本身，所以没有可用的 MAC 地址。最终的解决方案来自 ISP 提供的终端：由于它本质上是定制化的 AndroidTV，MAC 地址可以直接从设置得到，之后只要把插着网线的设备的硬件 MAC 地址换成上述地址即可。修改之后再打开浏览器已经不要求鉴权了，访问网页 / ping / 连接游戏服务器全部大成功，放两张图在下面：</p>
<img src="2022-10-15 23.28.17.jpg" style="zoom:100%;">





<img src="2022-10-15 23.28.23.jpg" style="zoom:40%;">



<p>这样还有一个好处就是不会和网络中的其他硬件有 MAC 地址冲突，<del>没有人受伤害的世界达成了</del></p>
<h2 id="尾声"><a href="#尾声" class="headerlink" title="尾声"></a>尾声</h2><p>接下来也许会买个路由器，因为目前电脑的无线网卡快要坏掉了。</p>
<ul>
<li>目前已经买到了路由器并且配了 MAC 地址克隆，全天候的完整互联网访问 get</li>
</ul>
</article><section class="jump-container is-flex is-justify-content-space-between my-6"><!-- em is empty placeholder--><em></em><a class="button is-default" href="/2022/09/17/%E5%A4%A9%E6%96%87%E5%AD%A6%E4%B8%AD%E7%9A%84%E7%89%A9%E7%90%86%E8%BF%87%E7%A8%8B/" title="天文学中的物理过程"><span class="has-text-weight-semibold">Next: 天文学中的物理过程</span><i class="iconfont icon-next ml-2 has-text-grey"></i></a></section></div></div></main></main><footer class="is-flex is-flex-direction-column is-align-items-center is-flex-shrink-0 is-family-serif"><section class="sns-container"></section><p><span>Copyright ©</span><span> pointeee 2022</span></p><div class="is-flex is-justify-content-center is-flex-wrap-wrap"><p>Powered by Hexo &verbar;&nbsp;</p><p class="is-flex is-justify-content-center"><a title="Hexo theme author" target="_blank" rel="noopener" href="//github.com/haojen">Theme by Haojen&nbsp;</a></p><div style="margin-top: 2px"><a class="github-button" title="github-button" target="_blank" rel="noopener" href="https://github.com/haojen/hexo-theme-Claudia" data-color-scheme="no-preference: light; light: light; dark: dark;" data-show-count="true"></a></div></div><div><span></span></div></footer><script async defer src="https://buttons.github.io/buttons.js"></script><script src="/js/post.js"></script></body></html>